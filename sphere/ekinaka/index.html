<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
<head>
<script type="text/javascript" src="../../js/three.min.js"></script>
<script type="text/javascript" src="../../js/thview.js"></script>
<title>ricoh intern</title>
</head>
<body>

<div id="ph1">
	<img id="tmp">
</div>

<script type="text/javascript" >
    
	var img1 = new ThView({
        	id:'ph1',
        	file:'equirectangular.jpg',
        	width:800,
        	height:400,
			firstview:180,
    });
	
	var targetList = []; 		      

	var geometry1 = new THREE.SphereGeometry( 8, 30, 30 );
	var material1 = new THREE.MeshBasicMaterial({color: 0x7fff00});
	var sphere = new THREE.Mesh( geometry1, material1 );
	sphere.position.set(-30,0,-60);
	img1.scene.add( sphere );		
	
	targetList.push(sphere);
	
	var raycaster = new THREE.Raycaster();

	img1.element.onclick = function(e) {
	
		e.preventDefault();

		var rect = e.target.getBoundingClientRect();    
		var mouse = new THREE.Vector2();
       
 		mouse.x =  e.clientX - rect.left;
 		mouse.y =  e.clientY - rect.top;
  	 	mouse.x =   (mouse.x / renderer.domElement.width) * 2 -1;
		mouse.y = - (mouse.y / renderer.domElement.height) * 2 +1;
	
		raycaster.setFromCamera(mouse, img1.camera);
		var intersects = raycaster.intersectObjects(targetList);
		
		if(intersects.length >0) {
  		    window.location.href = "../nishiguchi/index.html";
		}
	};
	
	img1.element.addEventListener('mousemove', function(e) {
		if(img1.mousedown) return;
		var rect = e.target.getBoundingClientRect();    
		var mouse = new THREE.Vector2();
       
 		mouse.x =  e.clientX - rect.left;
 		mouse.y =  e.clientY - rect.top;
  	 	mouse.x =   (mouse.x / renderer.domElement.width) * 2 -1;
		mouse.y = - (mouse.y / renderer.domElement.height) * 2 +1;
	
		raycaster.setFromCamera(mouse, img1.camera);
		var intersects = raycaster.intersectObjects(targetList);
		
		if(intersects.length > 0) {
  			sphere.scale.set(1.3, 1.3, 1.3);
		} else {
			sphere.scale.set(1, 1, 1);
		}
	})
</script>

</body>
</html>